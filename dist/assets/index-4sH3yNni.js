import{c as w,j as e,S as je,r as $,_ as u,B,X as ve,C as we}from"./index-B2fn0e3J.js";import{P as ke}from"./index-DqzFKyc1.js";import{r as m}from"./router-DMIetGpf.js";import{c as Se,d as Ae,C as Pe,a as Me}from"./card-DlqlLCG2.js";import{T as Fe,a as Te,b as ce,c as T,d as Ie,e as F,P as Ce}from"./index-CHAAL6aw.js";import{u as De,k as ze,l as re,a as qe,o as $e,F as Be,R as Y,n as ue,B as Ve,c as He,b as v,T as pe}from"./useCustomQuery-BSE_bnCf.js";import{R as Ue,S as xe}from"./separator-35JbEdOj.js";import{B as Le}from"./book-COhdvShV.js";import{C as ge}from"./calendar-D5m2l_SC.js";import{A as _e}from"./archive-t-W7XgAF.js";import{F as ne}from"./file-text-RnWBkgfv.js";import{U as Re}from"./upload-CmERKfpN.js";import{B as V}from"./badge-9BcICoFq.js";import{D as Ee,a as Oe,b as Xe,c as me,S as fe}from"./dropdown-menu-D3Gk0zEe.js";import{D as Je,a as Ze,b as We,c as Ge}from"./dialog-CmNTkuaS.js";import{B as Ke}from"./book-open-RIN6Knm9.js";import{G as Qe}from"./globe-BNcOgHoL.js";import{f as he}from"./format-CWZx4aKk.js";import{S as Ye}from"./search-DhofZsvG.js";import{C as es}from"./circle-plus-DrvmWFeY.js";import"./axios-DmypytPv.js";import"./check-D-wVXaeI.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=w("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=w("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=w("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=w("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=w("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=w("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=w("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=w("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=w("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function os({children:l,open:f,setOpen:d,title:j,setEdit:o,isLoading:b}){const I=()=>{o(!1),d(p=>!p)};return e.jsxs("div",{children:[f&&e.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900/50 dark:bg-gray-900/80"}),e.jsx("div",{id:"authentication-modal",tabIndex:-1,className:`${f?"flex":"hidden"} fixed left-0 right-0 top-0 z-50 h-[calc(100%-1rem)] max-h-full w-full items-center justify-center overflow-y-auto overflow-x-hidden md:inset-0`,children:e.jsx("div",{className:"relative max-h-full w-full max-w-6xl p-4",children:e.jsxs("div",{className:"relative rounded-lg bg-white shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-t border-b p-4 dark:border-gray-600 md:p-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:j??"Add/Edit"}),e.jsxs("button",{onClick:I,type:"button",className:"end-2.5 ms-auto inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[e.jsx("svg",{className:"h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"p-4 md:p-5",children:b?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(je,{})}):l})]})})})]})}const cs=He().shape({title:v().required("Title is required"),abstract:v().required("Abstract is required"),keywords:v(),issueId:v().required("Issue is required"),submissionId:v(),doi:v(),pages:v().matches(/^\d+-\d+$/,"Pages must be in format XXXX-XXXX"),publicationDate:v().required("Publication date is required"),fullText:v()});function ms({open:l,setOpen:f,title:d,id:j,edit:o,setEdit:b,refetch:I}){var R,E,O,X,J,Z;const[p,ee]=m.useState(null),[H,C]=m.useState(""),[D,se]=m.useState(0),[z,q]=m.useState(!1),de=De({}),t=ze({}),{data:a,isFetching:oe}=re({api:`${$.getArticlesById}/${j}`,options:{enabled:o}}),U=re({api:`${$.getAllIssue}?page=1&limit=100`,options:{enabled:!0}}),L=re({api:`${$.getAllSubmissions}?page=1&limit=100`,options:{enabled:!0}}),x=qe({defaultValues:{title:"",abstract:"",keywords:"",issueId:"",submissionId:"",doi:"",pages:"",publicationDate:"",fullText:""},resolver:$e(cs)}),ae=i=>{if(i.target.files&&i.target.files[0]){const r=i.target.files[0];if(r.type!=="application/pdf"){u.error("Only PDF files are allowed");return}if(r.size>10*1024*1024){u.error("File size should not exceed 10MB");return}ee(r),C(r.name),u.success("PDF file selected successfully")}},_=()=>{ee(null),C("")},te=async()=>{if(!p)return u.error("No PDF file selected"),null;q(!0),se(0);try{new FormData().append("file",p);const r=await new Promise(c=>{let h=0;const g=setInterval(()=>{h+=10,se(h),h>=100&&(clearInterval(g),c({data:{fileUrl:`https://example.com/uploads/${p.name}`}}))},300)});return q(!1),u.success("PDF uploaded successfully"),r.data.fileUrl}catch{return u.error("Failed to upload PDF file"),q(!1),null}},le=async i=>{var r,c,h,g;try{let y=null;if(p&&(y=await te(),!y))return;const k={title:i.title,abstract:i.abstract,keywords:i.keywords,issueId:i.issueId,submissionId:i.submissionId||void 0,doi:i.doi,pages:i.pages,publicationDate:i.publicationDate,fullText:y||i.fullText,fileType:p?"pdf":"text"};if(o&&j){const n=await t.mutateAsync({api:`${$.updateArticles}/${j}`,data:k});(r=n.data)!=null&&r.success?u.success((c=n==null?void 0:n.data)==null?void 0:c.message):u.error("Article not updated successfully")}else{const n=await de.mutateAsync({api:$.createArticles,data:k});(h=n.data)!=null&&h.success?u.success((g=n==null?void 0:n.data)==null?void 0:g.message):u.error("Article not created successfully")}f(!1),b&&b(!1),I&&I()}catch{u.error("Failed to submit the form")}};m.useEffect(()=>{var i,r,c,h,g,y,k,n,W,G,K,Q,s,N,S,A,P,M;o&&a?(x.reset({title:(i=a==null?void 0:a.data)==null?void 0:i.title,abstract:(r=a==null?void 0:a.data)==null?void 0:r.abstract,keywords:(h=(c=a==null?void 0:a.data)==null?void 0:c.keywords)==null?void 0:h.join(", "),issueId:((y=(g=a==null?void 0:a.data)==null?void 0:g.issueId)==null?void 0:y._id)||((k=a==null?void 0:a.data)==null?void 0:k.issueId),submissionId:((W=(n=a==null?void 0:a.data)==null?void 0:n.submissionId)==null?void 0:W._id)||((G=a==null?void 0:a.data)==null?void 0:G.submissionId),doi:(K=a==null?void 0:a.data)==null?void 0:K.doi,pages:(Q=a==null?void 0:a.data)==null?void 0:Q.pages,publicationDate:(N=(s=a==null?void 0:a.data)==null?void 0:s.publicationDate)==null?void 0:N.split("T")[0],fullText:(S=a==null?void 0:a.data)==null?void 0:S.fullText}),(A=a==null?void 0:a.data)!=null&&A.fullText&&((P=a==null?void 0:a.data)==null?void 0:P.fileType)==="pdf"&&C(((M=a==null?void 0:a.data)==null?void 0:M.fullText.split("/").pop())||"Current PDF file")):(x.reset({title:"",abstract:"",keywords:"",issueId:"",submissionId:"",doi:"",pages:"",publicationDate:"",fullText:""}),_())},[o,a,x.reset]);const ie=()=>{const i=x.formState.errors,r=Object.entries(i).map(([,c])=>c==null?void 0:c.message).filter(Boolean);r.length>0&&u.error(r.join(", "))};return e.jsx(os,{open:l,setOpen:f,title:d,setEdit:b,edit:o,isLoading:oe,children:e.jsx(Be,{methods:x,onSubmit:x.handleSubmit(le,ie),children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto pr-2",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(Le,{className:"h-5 w-5 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(Y,{name:"title",label:"Article Title",placeholder:"Enter a descriptive title for your article",className:"pr-2 pl-2"})}),e.jsx("div",{className:"relative w-full",children:e.jsx(Ue,{name:"abstract",label:"Abstract",placeholder:"Provide a concise summary of your article",rows:4,className:"w-full border rounded-md p-1 shadow-sm "})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{name:"keywords",label:"Keywords",placeholder:"E.g., research, medicine, technology (comma separated)",className:"pr-2 pl-2"})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(ss,{className:"h-5 w-5 mr-2 text-blue-600"}),"Publication Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{name:"publicationDate",label:"Publication Date",type:"date",className:"pr-2 pl-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{name:"doi",label:"DOI",placeholder:"e.g., 10.1000/xyz123",className:"pr-2 pl-2"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-blue-600"}),e.jsx(Y,{name:"pages",label:"Page Range",placeholder:"e.g., 123-145",className:"pr-2 pl-2"})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2 text-blue-600"}),"Journal Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{name:"issueId",label:"Select Issue",data:(O=(E=(R=U==null?void 0:U.data)==null?void 0:R.data)==null?void 0:E.docs)==null?void 0:O.map(i=>{var r;return{label:`${(r=i.journal)==null?void 0:r.title} - Vol. ${i.volume}, No. ${i.issueNumber}`,value:i._id}}),className:"pr-2 pl-2"}),e.jsx(ue,{name:"submissionId",label:"Related Submission (Optional)",data:(Z=(J=(X=L==null?void 0:L.data)==null?void 0:X.data)==null?void 0:J.docs)==null?void 0:Z.map(i=>({label:i.title,value:i._id})),className:"pr-2 pl-2"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2 text-blue-600"}),"Article Full Text"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx(as,{className:"h-10 w-10 text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Upload PDF file containing the full text of your article"}),e.jsx("input",{type:"file",id:"pdfUpload",accept:"application/pdf",onChange:ae,className:"hidden"}),e.jsxs("label",{htmlFor:"pdfUpload",className:"px-4 py-2 bg-blue-600 text-white rounded-md cursor-pointer hover:bg-blue-700 transition-colors",children:[e.jsx(Re,{className:"h-4 w-4 inline mr-2"}),"Select PDF File"]})]})}),H&&e.jsxs("div",{className:"bg-gray-100 p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:H})]}),e.jsx("button",{type:"button",onClick:_,className:"text-red-500 hover:text-red-700",children:e.jsx(ds,{className:"h-4 w-4"})})]}),z&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${D}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[D,"% Uploaded"]})]})]}),e.jsx("input",{type:"hidden",...x.register("fullText")})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(Ve,{isLoading:x.formState.isSubmitting||z,type:"submit",className:"h-12 w-full rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium flex items-center justify-center",disabled:x.formState.isSubmitting||z,children:[e.jsx(rs,{className:"h-5 w-5 mr-2"}),o?"Update Article":"Publish Article"]})})]})})})}function xs({article:l,open:f,onOpenChange:d}){var j;return e.jsx(Je,{open:f,onOpenChange:d,children:e.jsxs(Ze,{className:"max-w-4xl overflow-y-auto max-h-[90vh]",children:[e.jsx(We,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Article Details"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:l.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(V,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ge,{className:"h-3 w-3"}),he(new Date(l.publicationDate),"MMMM d, yyyy")]}),l.doi&&e.jsxs(V,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3"}),"DOI: ",l.doi]}),l.pages&&e.jsxs(V,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ls,{className:"h-3 w-3"}),"Pages: ",l.pages]})]})]}),e.jsx(xe,{}),l.journal&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Journal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Journal"}),e.jsx("p",{children:l.journal.title||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"ISSN"}),e.jsx("p",{children:l.journal.issn||"N/A"})]}),l.issue&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Volume/Issue"}),e.jsxs("p",{children:["Vol.",l.issue.volume," , No. ",l.issue.issueNumber]})]}),l.journal.website&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Website"}),e.jsxs("a",{href:l.journal.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3 w-3"}),"Visit Journal"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Abstract"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:l.abstract})]}),((j=l.keywords)==null?void 0:j.length)>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.keywords.map((o,b)=>e.jsx(V,{variant:"secondary",children:o},b))})]}),e.jsx(xe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Full Text"}),e.jsx("div",{className:"prose max-w-none text-gray-700 whitespace-pre-line",children:l.fullText.startsWith("http")?e.jsx("a",{href:l.fullText,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Download PDF"}):l.fullText})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(B,{variant:"outline",onClick:()=>d(!1),className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Close"]})})]})]})})}function hs(){var x,ae,_,te,le,ie,R,E,O,X,J,Z,i,r,c,h,g,y,k,n,W,G,K,Q;const[l,f]=m.useState(1),[d,j]=m.useState(10),[o,b]=m.useState(""),[I,p]=m.useState(!1),[ee,H]=m.useState(""),[C,D]=m.useState(!1),[se,z]=m.useState(!1),[q,de]=m.useState(null),t=re({api:`${$.getAllArticles}?page=${l}&limit=${d}&q=${o}`,key:"getAllArticles",value:[l,d,o],options:{enabled:!0}}),a=s=>{p(!0),D(!0),H(s)},oe=s=>{b(s.target.value)},U=s=>{s.preventDefault(),f(1),t.refetch()},L=({article:s})=>{var N,S,A,P,M;return e.jsx(Pe,{className:"mb-4",children:e.jsxs(Me,{className:"pt-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s==null?void 0:s.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(S=(N=s==null?void 0:s.issue)==null?void 0:N.journal)==null?void 0:S.title," - Vol. ",(A=s==null?void 0:s.issue)==null?void 0:A.volume,", No. ",(P=s==null?void 0:s.issue)==null?void 0:P.issueNumber]})]}),e.jsx(V,{variant:"outline",children:he(new Date(s==null?void 0:s.publicationDate),"MMM d, yyyy")})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.abstract}),((M=s==null?void 0:s.keywords)==null?void 0:M.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.keywords.map((be,Ne)=>e.jsx(V,{variant:"secondary",children:be},Ne))}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{size:"sm",onClick:()=>a(s==null?void 0:s._id),className:"flex items-center gap-1",children:[e.jsx(fe,{size:14})," Edit"]}),e.jsxs(B,{size:"sm",variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(pe,{size:14})," Delete"]})]}),e.jsxs(B,{size:"sm",variant:"outline",children:[e.jsx(ne,{size:14,className:"mr-2"})," View Details"]})]})]})})};return e.jsxs("main",{className:"container mx-auto px-4 py-6",children:[q&&e.jsx(xs,{article:q,open:se,onOpenChange:z}),e.jsx(ms,{open:I,setOpen:p,title:C?"Edit Article":"Add Article",id:ee,edit:C,setEdit:D,refetch:t.refetch}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsx(Se,{className:"text-xl font-bold",children:"Article Management"}),e.jsxs("div",{className:"flex flex-col sm:flex-row w-full md:w-auto gap-3",children:[e.jsxs("form",{onSubmit:U,className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Search articles...",value:o,onChange:oe,className:"w-full h-10 pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx(Ye,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs(B,{className:"flex items-center gap-2 whitespace-nowrap",onClick:()=>{D(!1),H(""),p(!0)},children:[e.jsx(es,{size:18}),"Add Article"]})]})]}),e.jsxs(Ae,{className:"mb-4",children:["Total Articles: ",((ae=(x=t.data)==null?void 0:x.data)==null?void 0:ae.totalDocs)||0]}),t.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(je,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs(Fe,{children:[e.jsx(Te,{children:e.jsxs(ce,{children:[e.jsx(T,{className:"w-12",children:"#"}),e.jsx(T,{children:"Title"}),e.jsx(T,{children:"Journal/Issue"}),e.jsx(T,{children:"Publication Date"}),e.jsx(T,{children:"Pages"}),e.jsx(T,{children:"Status"}),e.jsx(T,{className:"text-right",children:"Actions"})]})}),e.jsx(Ie,{children:((le=(te=(_=t==null?void 0:t.data)==null?void 0:_.data)==null?void 0:te.docs)==null?void 0:le.length)===0?e.jsx(ce,{children:e.jsx(F,{colSpan:6,className:"text-center py-8",children:"No articles found"})}):(E=(R=(ie=t==null?void 0:t.data)==null?void 0:ie.data)==null?void 0:R.docs)==null?void 0:E.map((s,N)=>{var S,A,P,M;return e.jsxs(ce,{children:[e.jsx(F,{children:l*d-d+N+1}),e.jsx(F,{className:"font-medium",children:s==null?void 0:s.title}),e.jsxs(F,{children:[(A=(S=s==null?void 0:s.issue)==null?void 0:S.journal)==null?void 0:A.title," - Vol. ",(P=s==null?void 0:s.issue)==null?void 0:P.volume,", No. ",(M=s==null?void 0:s.issue)==null?void 0:M.issueNumber]}),e.jsx(F,{children:he(new Date(s==null?void 0:s.publicationDate),"MMM d, yyyy")}),e.jsx(F,{children:(s==null?void 0:s.pages)||"N/A"}),e.jsx(F,{children:(s==null?void 0:s.status)==1?"Review":"Pending"}),e.jsx(F,{className:"text-right",children:e.jsxs(Ee,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(B,{variant:"outline",size:"sm",className:"h-8 ml-auto flex items-center gap-1",children:["Actions ",e.jsx(we,{size:14})]})}),e.jsxs(Xe,{align:"end",children:[e.jsxs(me,{onClick:()=>a(s==null?void 0:s._id),children:[e.jsx(fe,{size:14,className:"mr-2"})," Edit"]}),e.jsxs(me,{className:"text-red-600",children:[e.jsx(pe,{size:14,className:"mr-2"})," Delete"]}),e.jsxs(me,{onClick:()=>{de(s),z(!0)},children:[e.jsx(ne,{size:14,className:"mr-2"})," View Details"]})]})]})})]},s==null?void 0:s._id)})})]})}),e.jsx("div",{className:"md:hidden",children:((J=(X=(O=t==null?void 0:t.data)==null?void 0:O.data)==null?void 0:X.docs)==null?void 0:J.length)===0?e.jsx("div",{className:"text-center py-8",children:"No articles found"}):(r=(i=(Z=t==null?void 0:t.data)==null?void 0:Z.data)==null?void 0:i.docs)==null?void 0:r.map((s,N)=>e.jsx(L,{article:s,index:N},s==null?void 0:s._id))}),e.jsx(xe,{className:"my-4"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(l-1)*d+1," to ",Math.min(l*d,((h=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:h.totalDocs)||0)," of ",((y=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:y.totalDocs)||0," entries"]}),e.jsx(Ce,{page:l,perPage:d,totalPage:(n=(k=t==null?void 0:t.data)==null?void 0:k.data)==null?void 0:n.totalDocs,hasNextPage:(G=(W=t==null?void 0:t.data)==null?void 0:W.data)==null?void 0:G.hasNextPage,hasPrevPage:(Q=(K=t==null?void 0:t.data)==null?void 0:K.data)==null?void 0:Q.hasPrevPage,setPage:f,setPerPage:j})]})]})]})})]})}function $s(){return e.jsx(ke,{title:"Article List",children:e.jsx("div",{children:e.jsx(hs,{})})})}export{$s as default};
