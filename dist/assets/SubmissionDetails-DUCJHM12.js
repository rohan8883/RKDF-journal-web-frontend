import{c as j,j as e,e as X,C as Z,U as R,B as T,r as _}from"./index-qpQYrg8D.js";import{r as G}from"./router-DMIetGpf.js";import{b as $}from"./useCustomQuery-Bmkk5bpv.js";import{B as z}from"./badge-BbaaeNzJ.js";import{B as P}from"./book-D65Wrols.js";import{T as Q}from"./tag-CqI3dSl9.js";import{B as W}from"./book-open-jEPWYbzQ.js";import{C as Y}from"./calendar-bGdyAFHe.js";import{C as h}from"./clock-DS-b_z1M.js";import{F as p}from"./file-text-CkO7R4sx.js";import{D as H}from"./download-Cvi70G0z.js";import{F as D}from"./file-symlink-BSq8h50h.js";import{C as O}from"./circle-alert-Dan4rrje.js";import{C as ee}from"./circle-check-big-BmGr3lGF.js";import{C as le}from"./circle-x-CSoGIZq5.js";import{f as te}from"./format-CWZx4aKk.js";import"./axios-DmypytPv.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=j("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=j("CornerUpRight",[["polyline",{points:"15 14 20 9 15 4",key:"1tbx3s"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function a({className:x,...i}){return e.jsx("div",{className:X("animate-pulse rounded-md bg-primary/10",x),...i})}const ce={pending:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(h,{className:"h-4 w-4"})},under_review:{color:"bg-blue-100 text-blue-800",icon:e.jsx(O,{className:"h-4 w-4"})},accepted:{color:"bg-green-100 text-green-800",icon:e.jsx(ee,{className:"h-4 w-4"})},rejected:{color:"bg-red-100 text-red-800",icon:e.jsx(le,{className:"h-4 w-4"})},revisions_required:{color:"bg-purple-100 text-purple-800",icon:e.jsx(p,{className:"h-4 w-4"})}};function Ce({submissionId:x}){var N,g,v,u,w,y,b,C,k,A,I,L,B,F,S,E,U;const[i,V]=G.useState(!0),{data:m,isLoading:q}=$({api:`${(N=_)==null?void 0:N.getSubmissionsById}/${x}`,options:{enabled:!!x}}),{data:o,isLoading:K}=$({api:`${(g=_)==null?void 0:g.getReviewerMessages}?submissionId=${x}`,options:{enabled:!!x}}),l=m==null?void 0:m.data,c=((v=o==null?void 0:o.data)==null?void 0:v.docs)||[],d=t=>{if(!t)return"N/A";try{return te(new Date(t),"MMM dd, yyyy")}catch{return"Invalid date"}},f=(t,r)=>{if(!t)return;const s=document.createElement("a");s.href=t,s.download=r||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s)};if(q)return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"h-8 w-3/4"}),e.jsx(a,{className:"h-4 w-1/4"}),e.jsx(a,{className:"h-24 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{className:"h-12 w-full"}),e.jsx(a,{className:"h-12 w-full"})]})]})});const n=(t=>{const r={color:"bg-gray-100 text-gray-800",icon:e.jsx(O,{className:"h-4 w-4"})};return t&&ce[t]||r})(l==null?void 0:l.status);return e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2 md:mb-0",children:l==null?void 0:l.title}),e.jsxs(z,{className:`${n==null?void 0:n.color} flex items-center gap-1 px-3 py-1 text-sm font-medium`,children:[n==null?void 0:n.icon,(u=l==null?void 0:l.status)==null?void 0:u.replace("_"," ").toUpperCase()]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2 text-blue-600"}),"Submission Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Abstract"}),e.jsx("p",{className:"text-gray-800 whitespace-pre-line",children:l==null?void 0:l.abstract})]}),(l==null?void 0:l.keywords)&&(l==null?void 0:l.keywords.length)>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-1 text-blue-600"}),"Keywords"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(w=l==null?void 0:l.keywords)==null?void 0:w.map((t,r)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:t},r))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-1 text-blue-600"}),"Journal"]}),e.jsx("p",{className:"text-gray-800",children:((y=l==null?void 0:l.journalId)==null?void 0:y.title)||"Journal information not available"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-1 text-blue-600"}),"Submission Date"]}),e.jsx("p",{className:"text-gray-800",children:d(l==null?void 0:l.createdAt)})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-1 text-blue-600"}),"Last Updated"]}),e.jsx("p",{className:"text-gray-800",children:d(l==null?void 0:l.updatedAt)})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer mb-2",onClick:()=>V(!i),children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2 text-blue-600"}),"Reviewer Messages (",(c==null?void 0:c.length)||0,")"]}),i?e.jsx(re,{className:"h-5 w-5 text-gray-500"}):e.jsx(Z,{className:"h-5 w-5 text-gray-500"})]}),i&&e.jsx("div",{className:"space-y-4 mt-2",children:K?e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"h-24 w-full"}),e.jsx(a,{className:"h-24 w-full"})]}):(c==null?void 0:c.length)>0?c.map((t,r)=>{var s,M;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:e.jsx(R,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:((s=t==null?void 0:t.reviewerId)==null?void 0:s.name)||"Anonymous Reviewer"}),e.jsx("p",{className:"text-xs text-gray-500",children:d(t==null?void 0:t.createdAt)})]}),e.jsx(z,{className:"bg-blue-100 text-blue-800 border-none",children:(t==null?void 0:t.messageType)||"Comment"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t==null?void 0:t.content}),(t==null?void 0:t.response)&&e.jsx("div",{className:"mt-3 ml-4 pl-3 border-l-2 border-gray-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(se,{className:"h-4 w-4 text-gray-400 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Response from ",((M=l==null?void 0:l.authorId)==null?void 0:M.name)||"Author"," Â· ",d(t==null?void 0:t.responseDate)]}),e.jsx("p",{className:"text-gray-700",children:t==null?void 0:t.response})]})]})})]})]})},r)}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(J,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No reviewer messages yet"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-blue-600"}),"Author Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Name"}),e.jsx("p",{className:"text-gray-800",children:((b=l==null?void 0:l.authorId)==null?void 0:b.name)||"Author information not available"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-800",children:((C=l==null?void 0:l.authorId)==null?void 0:C.email)||"Email not available"})]}),((k=l==null?void 0:l.authorId)==null?void 0:k.affiliation)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Affiliation"}),e.jsx("p",{className:"text-gray-800",children:(A=l==null?void 0:l.authorId)==null?void 0:A.affiliation})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(p,{className:"h-5 w-5 mr-2 text-blue-600"}),"Files"]}),e.jsxs("div",{className:"space-y-4",children:[(l==null?void 0:l.manuscriptFile)&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:e.jsx(p,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Manuscript"}),e.jsx("p",{className:"text-xs text-gray-500",children:(L=(I=l==null?void 0:l.manuscriptFile)==null?void 0:I.split("/"))==null?void 0:L.pop()})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{var t,r;return f(l==null?void 0:l.manuscriptFile,((r=(t=l==null?void 0:l.manuscriptFile)==null?void 0:t.split("/"))==null?void 0:r.pop())||"manuscript.pdf")},children:e.jsx(H,{className:"h-4 w-4"})})]})}),(l==null?void 0:l.coverLetter)&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:e.jsx(D,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Cover Letter"}),e.jsx("p",{className:"text-xs text-gray-500",children:(F=(B=l==null?void 0:l.coverLetter)==null?void 0:B.split("/"))==null?void 0:F.pop()})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{var t,r;return f(l==null?void 0:l.coverLetter,((r=(t=l==null?void 0:l.coverLetter)==null?void 0:t.split("/"))==null?void 0:r.pop())||"cover-letter.pdf")},children:e.jsx(H,{className:"h-4 w-4"})})]})}),!(l!=null&&l.manuscriptFile)&&!(l!=null&&l.coverLetter)&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No files available"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(h,{className:"h-5 w-5 mr-2 text-blue-600"}),"Review Timeline"]}),e.jsx("div",{className:"space-y-4",children:l!=null&&l.statusHistory&&((S=l==null?void 0:l.statusHistory)==null?void 0:S.length)>0?e.jsx("div",{className:"relative pl-6 space-y-6 before:absolute before:left-2 before:top-0 before:h-full before:w-0.5 before:bg-gray-200",children:(E=l==null?void 0:l.statusHistory)==null?void 0:E.map((t,r)=>{var s;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d(t==null?void 0:t.date)}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:(s=t==null?void 0:t.status)==null?void 0:s.replace("_"," ").toUpperCase()}),(t==null?void 0:t.comment)&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t==null?void 0:t.comment})]})]},r)})}):e.jsxs("div",{className:"relative pl-6 space-y-6 before:absolute before:left-2 before:top-0 before:h-full before:w-0.5 before:bg-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d(l==null?void 0:l.createdAt)}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"SUBMISSION RECEIVED"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d(l==null?void 0:l.updatedAt)}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:(U=l==null?void 0:l.status)==null?void 0:U.replace("_"," ").toUpperCase()})]})]})]})})]})]})]})]})})}export{Ce as default};
