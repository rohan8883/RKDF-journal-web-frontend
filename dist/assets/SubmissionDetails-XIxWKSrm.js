import{c as N,j as e,d as O,C as V,r as E}from"./index-9onUbQM6.js";import{r as q,b as G}from"./router-GXfyPTrP.js";import{b as R}from"./useCustomQuery-CrT5j1by.js";import{B as K}from"./button-B2j84R8p.js";import{B as T}from"./badge-C_eElTha.js";import{B as P}from"./book-Bz0xMxrk.js";import{T as X}from"./tag-Bd7zkNh-.js";import{B as Z}from"./book-open-BIFB4qUt.js";import{C as H}from"./calendar-DyhRjeSe.js";import{C as f}from"./clock-DmJO-DKQ.js";import{U as F}from"./user-MA5DdsZZ.js";import{F as n}from"./file-text-Bqj2baqB.js";import{D as Q}from"./download-HGj7vg0H.js";import{C as _}from"./circle-alert-CyqPPQZN.js";import{C as W}from"./circle-check-big-gSJjOCOF.js";import{C as Y}from"./circle-x-XqdrV8xk.js";import{f as D}from"./format-CWZx4aKk.js";import"./axios-DmypytPv.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=N("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=N("CornerUpRight",[["polyline",{points:"15 14 20 9 15 4",key:"1tbx3s"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=N("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function a({className:i,...h}){return e.jsx("div",{className:O("animate-pulse rounded-md bg-primary/10",i),...h})}const re={submitted:{color:"bg-blue-100 text-blue-800",icon:e.jsx(n,{className:"h-4 w-4"})},pending:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(f,{className:"h-4 w-4"})},under_review:{color:"bg-blue-100 text-blue-800",icon:e.jsx(_,{className:"h-4 w-4"})},accepted:{color:"bg-green-100 text-green-800",icon:e.jsx(W,{className:"h-4 w-4"})},rejected:{color:"bg-red-100 text-red-800",icon:e.jsx(Y,{className:"h-4 w-4"})},revisions_required:{color:"bg-purple-100 text-purple-800",icon:e.jsx(n,{className:"h-4 w-4"})}};function be(){var u,y,v,w,b,g,C,A,k,B,I,U,M;const[i,h]=q.useState(!0),{submissionId:o}=G(),{data:p,isLoading:$}=R({api:`${(u=E)==null?void 0:u.getSubmissionsById}/${o}`,options:{enabled:!!o}}),{data:j,isLoading:z}=R({api:`${(y=E)==null?void 0:y.getReviewerMessages}?submissionId=${o}`,options:{enabled:!!o}}),l=p==null?void 0:p.data,c=((v=j==null?void 0:j.data)==null?void 0:v.docs)||[],d=r=>{if(!r)return"N/A";try{return D(new Date(r),"MMM dd, yyyy")}catch{return"Invalid date"}},J=(r,t)=>{if(!r)return;const s=document.createElement("a");s.href=r,s.download=t||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s)};if($)return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"h-8 w-3/4"}),e.jsx(a,{className:"h-4 w-1/4"}),e.jsx(a,{className:"h-24 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{className:"h-12 w-full"}),e.jsx(a,{className:"h-12 w-full"})]})]})});const x=(r=>{const t={color:"bg-gray-100 text-gray-800",icon:e.jsx(_,{className:"h-4 w-4"})};return r&&re[r]||t})(l==null?void 0:l.status);return e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2 md:mb-0",children:l==null?void 0:l.title}),e.jsxs(T,{className:`${x==null?void 0:x.color} flex items-center gap-1 px-3 py-1 text-sm font-medium`,children:[x==null?void 0:x.icon,(w=l==null?void 0:l.status)==null?void 0:w.replace("_"," ").toUpperCase()]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2 text-blue-600"}),"Submission Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Abstract"}),e.jsx("p",{className:"text-gray-800 whitespace-pre-line",children:l==null?void 0:l.abstract})]}),(l==null?void 0:l.keywords)&&(l==null?void 0:l.keywords.length)>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-blue-600"}),"Keywords"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(b=l==null?void 0:l.keywords)==null?void 0:b.map((r,t)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:r},t))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-blue-600"}),"Journal"]}),e.jsx("p",{className:"text-gray-800",children:((g=l==null?void 0:l.journalId)==null?void 0:g.title)||"Journal information not available"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(H,{className:"h-4 w-4 mr-1 text-blue-600"}),"Submission Date"]}),e.jsx("p",{className:"text-gray-800",children:d((l==null?void 0:l.submissionDate)||(l==null?void 0:l.createdAt))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-1 flex items-center",children:[e.jsx(f,{className:"h-4 w-4 mr-1 text-blue-600"}),"Last Updated"]}),e.jsx("p",{className:"text-gray-800",children:d(l==null?void 0:l.updatedAt)})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer mb-2",onClick:()=>h(!i),children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(L,{className:"h-5 w-5 mr-2 text-blue-600"}),"Reviewer Messages (",(c==null?void 0:c.length)||0,")"]}),i?e.jsx(ee,{className:"h-5 w-5 text-gray-500"}):e.jsx(V,{className:"h-5 w-5 text-gray-500"})]}),i&&e.jsx("div",{className:"space-y-4 mt-2",children:z?e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"h-24 w-full"}),e.jsx(a,{className:"h-24 w-full"})]}):(c==null?void 0:c.length)>0?c.map((r,t)=>{var s,m;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:e.jsx(F,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:((s=r==null?void 0:r.reviewerId)==null?void 0:s.name)||"Anonymous Reviewer"}),e.jsx("p",{className:"text-xs text-gray-500",children:d(r==null?void 0:r.createdAt)})]}),e.jsx(T,{className:"bg-blue-100 text-blue-800 border-none",children:(r==null?void 0:r.messageType)||"Comment"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:r==null?void 0:r.content}),(r==null?void 0:r.response)&&e.jsx("div",{className:"mt-3 ml-4 pl-3 border-l-2 border-gray-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(le,{className:"h-4 w-4 text-gray-400 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Response from ",((m=l==null?void 0:l.submittedBy)==null?void 0:m.fullName)||"Author"," Â· ",d(r==null?void 0:r.responseDate)]}),e.jsx("p",{className:"text-gray-700",children:r==null?void 0:r.response})]})]})})]})]})},t)}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(L,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No reviewer messages yet"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(F,{className:"h-5 w-5 mr-2 text-blue-600"}),"Author Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Name"}),e.jsx("p",{className:"text-gray-800",children:((C=l==null?void 0:l.submittedBy)==null?void 0:C.fullName)||"Author information not available"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-800",children:((A=l==null?void 0:l.submittedBy)==null?void 0:A.email)||"Email not available"})]}),((k=l==null?void 0:l.submittedBy)==null?void 0:k.affiliation)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Affiliation"}),e.jsx("p",{className:"text-gray-800",children:(B=l==null?void 0:l.submittedBy)==null?void 0:B.affiliation})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(n,{className:"h-5 w-5 mr-2 text-blue-600"}),"Files"]}),e.jsxs("div",{className:"space-y-4",children:[(l==null?void 0:l.fullManuscriptUrl)&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:e.jsx(n,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Manuscript"}),e.jsx("p",{className:"text-xs text-gray-500",children:(l==null?void 0:l.manuscriptFile)||"manuscript.pdf"})]})]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>J(l==null?void 0:l.fullManuscriptUrl,(l==null?void 0:l.manuscriptFile)||"manuscript.pdf"),children:e.jsx(Q,{className:"h-4 w-4"})})]})}),!(l!=null&&l.fullManuscriptUrl)&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No files available"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(f,{className:"h-5 w-5 mr-2 text-blue-600"}),"Review Timeline"]}),e.jsx("div",{className:"space-y-4",children:l!=null&&l.reviewerAssignments&&((I=l==null?void 0:l.reviewerAssignments)==null?void 0:I.length)>0?e.jsx("div",{className:"relative pl-6 space-y-6 before:absolute before:left-2 before:top-0 before:h-full before:w-0.5 before:bg-gray-200",children:(U=l==null?void 0:l.reviewerAssignments)==null?void 0:U.map((r,t)=>{var s,m,S;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d(r==null?void 0:r.assignedDate)}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:((s=r==null?void 0:r.status)==null?void 0:s.replace("_"," ").toUpperCase())||"ASSIGNED"}),((m=r==null?void 0:r.reviewerId)==null?void 0:m.fullName)&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Reviewer: ",(S=r==null?void 0:r.reviewerId)==null?void 0:S.fullName]})]})]},t)})}):e.jsxs("div",{className:"relative pl-6 space-y-6 before:absolute before:left-2 before:top-0 before:h-full before:w-0.5 before:bg-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d((l==null?void 0:l.submissionDate)||(l==null?void 0:l.createdAt))}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"SUBMISSION RECEIVED"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 mt-1.5 h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-600",children:d(l==null?void 0:l.updatedAt)}),e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:((M=l==null?void 0:l.status)==null?void 0:M.replace("_"," ").toUpperCase())||"SUBMITTED"})]})]})]})})]})]})]})]})})}export{be as default};
