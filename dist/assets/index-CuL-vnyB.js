import{j as e,U as m,b as C,B as N,_ as i,r as j,a as $}from"./index-28nypth3.js";import{r as c,d as D,L as T}from"./router-DMIetGpf.js";import{u as V,a as L,o as M,F as U,R as l,B,c as H,b as o,h as I}from"./useCustomQuery-DJCcqIQ9.js";import{P as _}from"./index-DonUvE_z.js";import{g}from"./services-KQnp_8oA.js";import{S as G}from"./index--j3Bziq4.js";import{D as J,a as K,b as z,c as Q,d as W}from"./dialog-4MkD9Z5k.js";import{L as y}from"./lock-jqArkN8y.js";import{E as v,a as w}from"./eye-BjK9qMK2.js";import{A as X}from"./arrow-right-CymUFUoW.js";import"./axios-DmypytPv.js";import"./card-CvN-M-qi.js";const Y=H({givenName:o().required("given name is required"),familyName:o().required("family name is required"),userName:o().required("user name is required"),mobile:o().required("mobile is required"),email:o().email("Valid email required").required("Email is required"),password:o().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:o().oneOf([I("password")],"Passwords must match").required("Please confirm your password"),affiliation:o().required("Institution/affiliation is required")});function ce(){const[f,P]=c.useState(!1),[h,k]=c.useState(!1),p=V({}),[F,u]=c.useState(!1),[b,S]=c.useState(""),[r,O]=c.useState(null),q=D(),n=L({defaultValues:{givenName:"",familyName:"",userName:"",mobile:"",email:"",password:"",confirmPassword:"",affiliation:""},resolver:M(Y)}),{formState:{errors:s}}=n,R=async a=>{try{const t=await p.mutateAsync({api:j.sendOtp,data:{email:a.email}});t.data.success?(i.success("OTP sent to your email!"),u(!0),O(a)):i.error(t.data.message||"Failed to send OTP")}catch(t){i.error(g(t))}},A=async a=>{if(a)try{if(await n.trigger(),!n.formState.isValid)return i.error("Please complete all required fields correctly");await R(a)}catch(t){i.error(g(t))}},E=async()=>{var a,t;if(r)try{const x=await p.mutateAsync({api:j.verifyEmailOtp,data:{email:r.email,otp:b}});if(!x.data.success)return i.error(x.data.message||"OTP verification failed");const d=await p.mutateAsync({api:$.register,data:{fullName:r.givenName,familyName:r.familyName,email:r.email,mobile:r.mobile,userName:r.userName,password:r.password,affiliation:r.affiliation}});(a=d==null?void 0:d.data)!=null&&a.success?(i.success("Registration successful! Please log in."),u(!1),q("/Journal/auth/login")):i.error(((t=d==null?void 0:d.data)==null?void 0:t.message)||"Registration failed")}catch(x){i.error(g(x))}};return e.jsxs(_,{title:"Register",children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-teal-700 text-white py-8 shadow-md",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx(m,{className:"h-8 w-8"}),e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Create an Author Account"})]}),e.jsx("p",{className:"text-center text-teal-100 max-w-3xl mx-auto",children:"Register to submit and manage your research papers"})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden transform transition-all hover:shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-500 text-white p-5",children:e.jsxs("h2",{className:"text-xl font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Author Registration"]})}),e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsx(U,{methods:n,onSubmit:n.handleSubmit(A),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"givenName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Given Name"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.givenName?"":e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"givenName",id:"givenName",className:`block w-full pl-10 pr-3 py-2 border ${s.givenName?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"Enter Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"familyName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Name"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.familyName?"":e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"familyName",id:"familyName",className:`block w-full pl-10 pr-3 py-2 border ${s.familyName?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"Enter Family Name"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-gray-700 mb-1",children:"User Name"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.userName?"":e.jsx(m,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"userName",id:"userName",className:`block w-full pl-10 pr-3 py-2 border ${s.userName?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"Enter User Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile"}),e.jsx(l,{name:"mobile",id:"mobile",inputValidation:["mobile"],className:`block w-full px-3 py-2 border ${s.mobile?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"Enter mobile"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"affiliation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Institution/Affiliation"}),e.jsx(l,{name:"affiliation",id:"affiliation",className:`block w-full px-3 py-2 border ${s.affiliation?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"RKDF University"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.email?"":e.jsx(C,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"email",id:"email",inputValidation:["email","removeSpace"],className:`block w-full pl-10 pr-3 py-2 border ${s.email?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.password?"":e.jsx(y,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"password",id:"password",type:f?"text":"password",className:`block w-full pl-10 pr-10 py-2 border ${s.password?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"••••••••"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>P(!f),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:f?e.jsx(v,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.confirmPassword?"":e.jsx(y,{className:"h-5 w-5 text-gray-400"})}),e.jsx(l,{name:"confirmPassword",id:"confirmPassword",type:h?"text":"password",className:`block w-full pl-10 pr-10 py-2 border ${s.confirmPassword?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm`,placeholder:"••••••••"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>k(!h),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:h?e.jsx(v,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})})})]})]}),e.jsx("div",{children:e.jsxs(B,{type:"submit",isLoading:n.formState.isSubmitting,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200",children:[e.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e.jsx(m,{className:"h-5 w-5 text-teal-300 group-hover:text-teal-200"})}),"Register Account"]})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(T,{to:"/login",className:"font-medium text-teal-600 hover:text-teal-500 text-sm flex items-center justify-center gap-1",children:["Sign in to your account",e.jsx(X,{className:"h-4 w-4"})]})})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx(G,{})})]})})]}),e.jsx(J,{open:F,onOpenChange:u,children:e.jsxs(K,{className:"sm:max-w-md",children:[e.jsxs(z,{children:[e.jsx(Q,{children:"Enter OTP Verification"}),e.jsx(W,{children:"Please enter the OTP sent to your email address"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-1",children:"OTP Code"}),e.jsx("input",{type:"text",id:"otp",value:b,onChange:a=>S(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Enter the 6-digit OTP"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(N,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(N,{onClick:E,className:"bg-teal-600 hover:bg-teal-700 text-white",children:"Verify & Register"})]})]})})]})})]})}export{ce as default};
