var it=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var s=(i,t,e)=>(it(i,t,"read from private field"),e?e.call(i):t.get(i)),a=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},u=(i,t,e,r)=>(it(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);var d=(i,t,e)=>(it(i,t,"access private method"),e);import{ar as Mt,as as J,at as At,au as Ct,av as Ot,aw as Bt,ax as jt,ay as Kt,az as St,aA as Y,aB as Et,aC as kt,aD as Qt,j as Nt,f as Wt,aE as ft}from"./index-DB-U-9Cm.js";import{r as y}from"./router-DMIetGpf.js";var m,c,K,b,M,P,O,k,T,L,Q,U,w,A,D,j,N,rt,W,nt,_,at,q,ot,z,ht,V,ut,H,ct,X,Ut,It,_t=(It=class extends Mt{constructor(t,e){super();a(this,D);a(this,N);a(this,W);a(this,_);a(this,q);a(this,z);a(this,V);a(this,H);a(this,X);a(this,m,void 0);a(this,c,void 0);a(this,K,void 0);a(this,b,void 0);a(this,M,void 0);a(this,P,void 0);a(this,O,void 0);a(this,k,void 0);a(this,T,void 0);a(this,L,void 0);a(this,Q,void 0);a(this,U,void 0);a(this,w,void 0);a(this,A,new Set);this.options=e,u(this,m,t),u(this,O,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,c).addObserver(this),wt(s(this,c),this.options)?d(this,D,j).call(this):this.updateResult(),d(this,q,ot).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lt(s(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lt(s(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,z,ht).call(this),d(this,V,ut).call(this),s(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,o=s(this,c);if(this.options=s(this,m).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");d(this,H,ct).call(this),s(this,c).setOptions(this.options),r._defaulted&&!J(this.options,r)&&s(this,m).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,c),observer:this});const h=this.hasListeners();h&&xt(s(this,c),o,this.options,r)&&d(this,D,j).call(this),this.updateResult(e),h&&(s(this,c)!==o||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&d(this,N,rt).call(this);const n=d(this,W,nt).call(this);h&&(s(this,c)!==o||this.options.enabled!==r.enabled||n!==s(this,w))&&d(this,_,at).call(this,n)}getOptimisticResult(t){const e=s(this,m).getQueryCache().build(s(this,m),t),r=this.createResult(e,t);return zt(this,r)&&(u(this,b,r),u(this,P,this.options),u(this,M,s(this,c).state)),r}getCurrentResult(){return s(this,b)}trackResult(t,e){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),e==null||e(o),t[o])})}),r}trackProp(t){s(this,A).add(t)}getCurrentQuery(){return s(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,m).defaultQueryOptions(t),r=s(this,m).getQueryCache().build(s(this,m),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,D,j).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,b)))}createResult(t,e){var Rt;const r=s(this,c),o=this.options,h=s(this,b),n=s(this,M),f=s(this,P),S=t!==r?t.state:s(this,K),{state:p}=t;let l={...p},bt=!1,C;if(e._optimisticResults){const R=this.hasListeners(),st=!R&&wt(t,e),Lt=R&&xt(t,r,e,o);(st||Lt)&&(l={...l,...Kt(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:yt,errorUpdatedAt:mt,status:F}=l;if(e.select&&l.data!==void 0)if(h&&l.data===(n==null?void 0:n.data)&&e.select===s(this,k))C=s(this,T);else try{u(this,k,e.select),C=e.select(l.data),C=St(h==null?void 0:h.data,C,e),u(this,T,C),u(this,O,null)}catch(R){u(this,O,R)}else C=l.data;if(e.placeholderData!==void 0&&C===void 0&&F==="pending"){let R;if(h!=null&&h.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))R=h.data;else if(R=typeof e.placeholderData=="function"?e.placeholderData((Rt=s(this,L))==null?void 0:Rt.state.data,s(this,L)):e.placeholderData,e.select&&R!==void 0)try{R=e.select(R),u(this,O,null)}catch(st){u(this,O,st)}R!==void 0&&(F="success",C=St(h==null?void 0:h.data,R,e),bt=!0)}s(this,O)&&(yt=s(this,O),C=s(this,T),mt=Date.now(),F="error");const Z=l.fetchStatus==="fetching",tt=F==="pending",et=F==="error",vt=tt&&Z,gt=C!==void 0;return{status:F,fetchStatus:l.fetchStatus,isPending:tt,isSuccess:F==="success",isError:et,isInitialLoading:vt,isLoading:vt,data:C,dataUpdatedAt:l.dataUpdatedAt,error:yt,errorUpdatedAt:mt,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>S.dataUpdateCount||l.errorUpdateCount>S.errorUpdateCount,isFetching:Z,isRefetching:Z&&!tt,isLoadingError:et&&!gt,isPaused:l.fetchStatus==="paused",isPlaceholderData:bt,isRefetchError:et&&gt,isStale:pt(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,b),r=this.createResult(s(this,c),this.options);if(u(this,M,s(this,c).state),u(this,P,this.options),s(this,M).data!==void 0&&u(this,L,s(this,c)),J(r,e))return;u(this,b,r);const o={},h=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,f=typeof n=="function"?n():n;if(f==="all"||!f&&!s(this,A).size)return!0;const g=new Set(f??s(this,A));return this.options.throwOnError&&g.add("error"),Object.keys(s(this,b)).some(S=>{const p=S;return s(this,b)[p]!==e[p]&&g.has(p)})};(t==null?void 0:t.listeners)!==!1&&h()&&(o.listeners=!0),d(this,X,Ut).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,q,ot).call(this)}},m=new WeakMap,c=new WeakMap,K=new WeakMap,b=new WeakMap,M=new WeakMap,P=new WeakMap,O=new WeakMap,k=new WeakMap,T=new WeakMap,L=new WeakMap,Q=new WeakMap,U=new WeakMap,w=new WeakMap,A=new WeakMap,D=new WeakSet,j=function(t){d(this,H,ct).call(this);let e=s(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(At)),e},N=new WeakSet,rt=function(){if(d(this,z,ht).call(this),Ct||s(this,b).isStale||!Ot(this.options.staleTime))return;const e=Bt(s(this,b).dataUpdatedAt,this.options.staleTime)+1;u(this,Q,setTimeout(()=>{s(this,b).isStale||this.updateResult()},e))},W=new WeakSet,nt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,c)):this.options.refetchInterval)??!1},_=new WeakSet,at=function(t){d(this,V,ut).call(this),u(this,w,t),!(Ct||this.options.enabled===!1||!Ot(s(this,w))||s(this,w)===0)&&u(this,U,setInterval(()=>{(this.options.refetchIntervalInBackground||jt.isFocused())&&d(this,D,j).call(this)},s(this,w)))},q=new WeakSet,ot=function(){d(this,N,rt).call(this),d(this,_,at).call(this,d(this,W,nt).call(this))},z=new WeakSet,ht=function(){s(this,Q)&&(clearTimeout(s(this,Q)),u(this,Q,void 0))},V=new WeakSet,ut=function(){s(this,U)&&(clearInterval(s(this,U)),u(this,U,void 0))},H=new WeakSet,ct=function(){const t=s(this,m).getQueryCache().build(s(this,m),this.options);if(t===s(this,c))return;const e=s(this,c);u(this,c,t),u(this,K,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},X=new WeakSet,Ut=function(t){Y.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,b))}),s(this,m).getQueryCache().notify({query:s(this,c),type:"observerResultsUpdated"})})},It);function qt(i,t){return t.enabled!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function wt(i,t){return qt(i,t)||i.state.data!==void 0&&lt(i,t,t.refetchOnMount)}function lt(i,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&pt(i,t)}return!1}function xt(i,t,e,r){return(i!==t||r.enabled===!1)&&(!e.suspense||i.state.status!=="error")&&pt(i,e)}function pt(i,t){return t.enabled!==!1&&i.isStaleByTime(t.staleTime)}function zt(i,t){return!J(i.getCurrentResult(),t)}var x,I,v,E,B,$,G,dt,Ft,Vt=(Ft=class extends Mt{constructor(t,e){super();a(this,B);a(this,G);a(this,x,void 0);a(this,I,void 0);a(this,v,void 0);a(this,E,void 0);u(this,x,t),this.setOptions(e),this.bindMethods(),d(this,B,$).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=s(this,x).defaultMutationOptions(t),J(this.options,e)||s(this,x).getMutationCache().notify({type:"observerOptionsUpdated",mutation:s(this,v),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&Et(e.mutationKey)!==Et(this.options.mutationKey)?this.reset():((r=s(this,v))==null?void 0:r.state.status)==="pending"&&s(this,v).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=s(this,v))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,B,$).call(this),d(this,G,dt).call(this,t)}getCurrentResult(){return s(this,I)}reset(){var t;(t=s(this,v))==null||t.removeObserver(this),u(this,v,void 0),d(this,B,$).call(this),d(this,G,dt).call(this)}mutate(t,e){var r;return u(this,E,e),(r=s(this,v))==null||r.removeObserver(this),u(this,v,s(this,x).getMutationCache().build(s(this,x),this.options)),s(this,v).addObserver(this),s(this,v).execute(t)}},x=new WeakMap,I=new WeakMap,v=new WeakMap,E=new WeakMap,B=new WeakSet,$=function(){var e;const t=((e=s(this,v))==null?void 0:e.state)??kt();u(this,I,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},G=new WeakSet,dt=function(t){Y.batch(()=>{var e,r,o,h,n,f,g,S;if(s(this,E)&&this.hasListeners()){const p=s(this,I).variables,l=s(this,I).context;(t==null?void 0:t.type)==="success"?((r=(e=s(this,E)).onSuccess)==null||r.call(e,t.data,p,l),(h=(o=s(this,E)).onSettled)==null||h.call(o,t.data,null,p,l)):(t==null?void 0:t.type)==="error"&&((f=(n=s(this,E)).onError)==null||f.call(n,t.error,p,l),(S=(g=s(this,E)).onSettled)==null||S.call(g,void 0,t.error,p,l))}this.listeners.forEach(p=>{p(s(this,I))})})},Ft),Dt=y.createContext(!1),Ht=()=>y.useContext(Dt);Dt.Provider;function Gt(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var $t=y.createContext(Gt()),Jt=()=>y.useContext($t);function Pt(i,t){return typeof i=="function"?i(...t):!!i}function Xt(){}var Yt=(i,t)=>{(i.suspense||i.throwOnError)&&(t.isReset()||(i.retryOnMount=!1))},Zt=i=>{y.useEffect(()=>{i.clearReset()},[i])},te=({result:i,errorResetBoundary:t,throwOnError:e,query:r})=>i.isError&&!t.isReset()&&!i.isFetching&&r&&Pt(e,[i.error,r]),ee=i=>{i.suspense&&typeof i.staleTime!="number"&&(i.staleTime=1e3)},se=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,ie=(i,t,e)=>t.fetchOptimistic(i).catch(()=>{e.clearReset()});function re(i,t,e){const r=Qt(),o=Ht(),h=Jt(),n=r.defaultQueryOptions(i);n._optimisticResults=o?"isRestoring":"optimistic",ee(n),Yt(n,h),Zt(h);const[f]=y.useState(()=>new t(r,n)),g=f.getOptimisticResult(n);if(y.useSyncExternalStore(y.useCallback(S=>{const p=o?()=>{}:f.subscribe(Y.batchCalls(S));return f.updateResult(),p},[f,o]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),y.useEffect(()=>{f.setOptions(n,{listeners:!1})},[n,f]),se(n,g))throw ie(n,f,h);if(te({result:g,errorResetBoundary:h,throwOnError:n.throwOnError,query:r.getQueryCache().get(n.queryHash)}))throw g.error;return n.notifyOnChangeProps?g:f.trackResult(g)}function ne(i,t){return re(i,_t)}function Tt(i,t){const e=Qt(),[r]=y.useState(()=>new Vt(e,i));y.useEffect(()=>{r.setOptions(i)},[r,i]);const o=y.useSyncExternalStore(y.useCallback(n=>r.subscribe(Y.batchCalls(n)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),h=y.useCallback((n,f)=>{r.mutate(n,f).catch(Xt)},[r]);if(o.error&&Pt(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:h,mutateAsync:o.mutate}}const ae=y.forwardRef(({className:i,type:t,...e},r)=>Nt.jsx("input",{type:t,className:Wt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",i),ref:r,...e}));ae.displayName="Input";const oe=async(i,t)=>(await ft.get(i,{...t})).data;function pe({key:i,api:t,options:e,value:r,config:o}){return ne({queryKey:[i??t,...r??[]],queryFn:async()=>await oe(t,o),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}const he=(i,t)=>ft.post(i,t),be=({options:i})=>Tt({mutationFn:({api:t,data:e})=>he(t,e),...i}),ue=(i,t)=>ft.put(i,t),ye=({options:i})=>Tt({mutationFn:({api:t,data:e})=>ue(t,e),...i});export{ae as I,ye as a,pe as b,be as u};
