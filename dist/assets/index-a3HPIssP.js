import{j as e,r as m}from"./index-D-iK7Out.js";import{P as I}from"./index-Bup6thsZ.js";import{S as C}from"./index-DXn1oBrn.js";import{r as i,L as N}from"./router-GXfyPTrP.js";import{a as b}from"./useCustomQuery-DxGnXVR6.js";import{S as D,b as P,c as V,d as Y,e as v}from"./select-iwycIox8.js";import{h as _}from"./moment-BjLXg0w5.js";import{A as E}from"./archive-BQmSC6Dl.js";import{S as x}from"./search-BZCZ_Nfq.js";import{C as w}from"./calendar-bJZgF3GK.js";import{B as G}from"./book-open-DenXnrrG.js";import"./axios-DmypytPv.js";import"./card-BfNk9eBp.js";function Q(){var u,p,g;const[n,y]=i.useState(""),[o,S]=i.useState("all"),[h,$]=i.useState({}),A=s=>{y(s.target.value)},k=o==="all"?`${m.getAllGuestPublication}?page=1&limit=1000&q=${n}`:`${m.getAllGuestPublication}?page=1&limit=1000&q=${n}&issueId=${o}`,c=b({api:k,options:{enabled:!0}}),d=b({api:`${m.getAllGuestIssue}?page=1&limit=100`,options:{enabled:!0}});return i.useEffect(()=>{var s,l;if((l=(s=c.data)==null?void 0:s.data)!=null&&l.docs){const a={};c.data.data.docs.forEach(r=>{const t=new Date(r.publicationDate).getFullYear();a[t]||(a[t]=[]),a[t].push(r)}),$(a)}},[c.data]),e.jsx(I,{title:"Archive",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-teal-700 text-white py-8 shadow-md",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx(E,{className:"h-8 w-8"}),e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Journal Archive"})]}),e.jsx("p",{className:"text-center text-teal-100 max-w-3xl mx-auto",children:"Browse through our collection of past issues and publications"})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"transform transition-all hover:shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-500 text-white p-5 rounded-t-lg flex items-center gap-3",children:[e.jsx(x,{className:"h-6 w-6"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Search Archive"})]}),e.jsx("div",{className:"bg-white border-t-0 rounded-b-lg shadow-md p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center",children:[e.jsx("div",{className:"hidden sm:flex",children:e.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center",children:e.jsx(x,{className:"h-8 w-8 text-teal-600"})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap w-full gap-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search by title, author, or keyword...",className:"w-full pl-10 pr-4 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500",value:n,onChange:A}),e.jsx(x,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"w-full sm:w-60",children:e.jsxs(D,{value:o,onValueChange:s=>S(s),children:[e.jsx(P,{className:"w-full",children:e.jsx(V,{placeholder:"Filter by issue"})}),e.jsxs(Y,{children:[e.jsx(v,{value:"all",children:"All Volume"}),(g=(p=(u=d==null?void 0:d.data)==null?void 0:u.data)==null?void 0:p.docs)==null?void 0:g.map(s=>{var l;return e.jsx(v,{value:s._id,children:`${(l=s.journal)==null?void 0:l.title} - Vol. ${s.volume}, No. ${s.issueNumber}, Year- ${_(s==null?void 0:s.publicationDate).format("YYYY")}`},s._id)})]})]})})]})]})})]}),Object.entries(h).sort(([s],[l])=>parseInt(l)-parseInt(s)).map(([s,l])=>e.jsxs("section",{className:"transform transition-all hover:shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-500 text-white p-5 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-6 w-6"}),e.jsxs("h2",{className:"text-xl font-semibold",children:[s," Issues"]})]}),e.jsxs("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:[l.length," ",l.length===1?"article":"articles"]})]}),e.jsx("div",{className:"bg-white border-t-0 rounded-b-lg shadow-md divide-y divide-gray-100",children:l.map(a=>{var r,t,f;return e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 w-16 h-16 bg-teal-100 rounded-lg flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"font-bold text-teal-700",children:["V",(r=a.issue)==null?void 0:r.volume]}),e.jsxs("span",{className:"text-xs text-teal-600",children:["No.",(t=a.issue)==null?void 0:t.issueNumber]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:e.jsx(N,{to:`/Journal/article-view/${a._id}`,className:"hover:text-teal-600",children:a.title})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-4 w-4"}),new Date(a.publicationDate).toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),"Pages: ",a.pages]})]}),((f=a.keywords)==null?void 0:f.length)>0&&e.jsx("div",{className:"mt-2",children:a.keywords.map(j=>e.jsx("span",{className:"inline-block bg-gray-100 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:j},j))})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(N,{to:`/Journal/article-view/${a._id}`,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"View Article"})})]})},a._id)})})]},s)),Object.keys(h).length===0&&e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:e.jsx("p",{className:"text-gray-500",children:"No articles found matching your search criteria."})})]}),e.jsx(C,{})]})})]})})}export{Q as default};
